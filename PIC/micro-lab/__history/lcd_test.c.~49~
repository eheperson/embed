#include <lcd_test.h>


//******************* ANA PROGRAM FONKSÝYONU *******************
void main ()
{ 
   setup_psp(PSP_DISABLED);        // PSP birimi devre dýþý
   setup_timer_1(T1_DISABLED);     // T1 zamanlayýcýsý devre dýþý
   setup_timer_2(T2_DISABLED,0,1); // T2 zamanlayýcýsý devre dýþý
   setup_adc_ports(NO_ANALOGS);    // ANALOG giriþ yok
   setup_adc(ADC_OFF);             // ADC birimi devre dýþý
   setup_CCP1(CCP_OFF);            // CCP1 birimi devre dýþý
   setup_CCP2(CCP_OFF);            // CCP2 birimi devre dýþý

   lcd_init();  
   rtc_init();  
   
   while(1){
      rtc_set_datetime(20,07,07,6,22,52); 
      rtc_get_time(saat,dakika,saniye);       
      rtc_get_date(gun,ay,yil,haftanin_gunu); 
      printf(lcd_putc,"\fT:%02d/%02d/20%02d ",gun,ay,yil); 

      switch(haftanin_gunu)  
      {                      
         case 1: printf(lcd_putc,"PAZ"); break; 
         case 2: printf(lcd_putc,"PZT"); break; 
         case 3: printf(lcd_putc,"SAL"); break; 
         case 4: printf(lcd_putc,"CRS"); break; 
         case 5: printf(lcd_putc,"PER"); break; 
         case 6: printf(lcd_putc,"CUM"); break; 
         case 7: printf(lcd_putc,"CTS"); break; 
      }
      printf(lcd_putc,"\nSaat:%02d:%02d:%02d",saat,dakika,saniye); 
      
      
      if(input(menu)){
         printf(lcd_putc,"\f  Saat Ayarý");
         while(1){
            if(input(menu)) break;
            if(input(select)){
               set_clock();
            }
         }

         printf(lcd_putc,"\f  Tarih Ayarý");
         while(1){
            if(input(menu)) break;
            if(input(select)){
               set_date();
            }
         }
            
         printf(lcd_putc,"\f  Alarm Ayarý");
         while(1){
            if(input(menu)) break;
            if(input(select)){
               set_alarm();
            }
         
         }
      }
      delay_ms(1000); 
  }
}

